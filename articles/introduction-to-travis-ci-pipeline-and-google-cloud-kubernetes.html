<!DOCTYPE html>
<html lang="en-US">


<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Introduction to Travis Deployment, Google Cloud SDK, Kubernetes Security with RBAC</title>
    <meta name="description" content="In this article, you’ll learn about Travis Deployment with Google Cloud Kubernetes Cluster and Overview of Kubernetes Security with RBAC." />
    <link rel="canonical" href="https://www.nexsoftsys.com/articles/introduction-to-travis-ci-pipeline-and-google-cloud-kubernetes.html" />
    <meta name="keywords" content="Travis Deployment, Google Cloud SDK, Kubernetes Security, RBAC, Cluster" />

    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Introduction to Travis Deployment, Google Cloud SDK, Kubernetes Security with RBAC" />
    <meta property="og:description" content="In this article, you’ll learn about Travis Deployment with Google Cloud Kubernetes Cluster and Overview of Kubernetes Security with RBAC." />
    <meta property="og:url" content="https://www.nexsoftsys.com/articles/introduction-to-travis-ci-pipeline-and-google-cloud-kubernetes.html" />
    <meta property="og:site_name" content="NEX Softsys" />
    <meta property="article:publisher" content="https://www.facebook.com/NexSoftSys/" />
    <meta property="article:section" content="Trending" />
    <meta property="og:image" content="https://www.nexsoftsys.com/articles/images/travis-ci-pipeline.png" />
    <meta property="og:image:secure_url" content="https://www.nexsoftsys.com/articles/images/travis-ci-pipeline.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:description" content="In this article, you’ll learn about Travis Deployment with Google Cloud Kubernetes Cluster and Overview of Kubernetes Security with RBAC." />
    <meta name="twitter:title" content="Introduction to Travis Deployment, Google Cloud SDK, Kubernetes Security with RBAC" />
    <meta name="twitter:site" content="@nexsoftsys" />
    <meta name="twitter:image" content="https://www.nexsoftsys.com/articles/images/travis-ci-pipeline.png" />
    <meta name="twitter:creator" content="@nexsoftsys" />

    <link type="image/x-icon" href="../images/favicon.ico" rel="shortcut icon" />
    <link rel="apple-touch-icon" sizes="57x57" href="../images/apple-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="../images/apple-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="../images/apple-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="../images/apple-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="../images/apple-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="../images/apple-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="../images/apple-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="../images/apple-icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="../images/apple-icon-180x180.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="../images/android-icon-192x192.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="../images/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="96x96" href="../images/favicon-96x96.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="../images/favicon-16x16.png" />
    <link rel="manifest" href="../images/manifest.json" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="msapplication-TileImage" content="images/ms-icon-144x144.png" />
    <meta name="theme-color" content="#ffffff" />

    <!-- Google Analytics -->
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
        ga('create', 'UA-64517863-1', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- Google Analytics /- -->

    <!-- Library -->
    <link rel="stylesheet" type="text/css" href="../css/lib.css">

    <!-- Custom - Common CSS -->
    <link rel="stylesheet" type="text/css" href="../css/style.css">
    <link rel="stylesheet" type="text/css" href="../css/navigation.css">
    <link rel="stylesheet" type="text/css" href="../style.css" />
    <noscript>
        <div class="ndiv">
            <div class="ntext">
                <b>JavaScript Required</b>
                <p>We're sorry, but we doesn't work properly without JavaScript enabled.</p>
            </div>
        </div>
    </noscript>
</head>

<body>
    <!-- Header Section -->
    <div id="return-to-top"><i class="fa fa-angle-up"></i></div>

    <header class="header_s">
        <!-- ===== Popup Box ===== -->
        <section class="top-box">
            <div class="container">
                <div class="row">
                    <div class="col-12 same-line">
                        <div class="contain-box">
                            <p>Looking for an Expert Development Team? Take two weeks Trial! <a href="javascript:;" id="myBtn">Try Now</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="modal" id="myModal">
            <div class="modal-content">
                <div class="modal-header">
                    <span class="close">&times;</span>
                    <strong>Free 2 Week Trial</strong>
                </div>
                <div class="modal-form">
                    <form>
                        <div class="form-group">
                            <label>Your Name *</label>
                            <input type="text" name="question-title" class="form-control" id="txt2Name" placeholder="Your Name" />
                        </div>
                        <div class="form-group">
                            <label>Your Email *</label>
                            <input type="text" name="question-title" class="form-control" id="txt2Email" placeholder="Your Email" />
                        </div>
                        <div class="form-group">
                            <label>Your Mobile *</label>
                            <input type="text" name="question-title" class="form-control" id="txt2Phone" placeholder="Your Mobile" />
                        </div>
                        <div class="form-group">
                            <label>Subject</label>
                            <input type="text" name="question-title" class="form-control" id="txt2Subject" placeholder="Subject" />
                            <input type="hidden" id="txt2Page" value="" />
                        </div>
                        <div class="form-group">
                            <label>Your Message</label>
                            <textarea class="form-control" cols="5" rows="5" placeholder="Your Message" id="txt2Message" name="message"></textarea>
                        </div>
                        <div class="form-group">
                            

<img id="imgCaptchaRFP" alt="captcha" src="" class="captcha-style" />
                            <input class="form-control captcha-txt" type="text" placeholder="Captcha" id="txt2Captcha" name="txtCaptcha" />
                        </div>
                    </form>
                </div>
                <div class="modal-footer text-center">
                    <button type="button" id="btn2WeekSubmit" value="Send" name="Submit">Send</button>
                    <p><span id="lbl2WeekInfo" class="lblblack"></span></p>
                </div>
            </div>
        </section>
        <!-- # -->
        <div class="container-fluid">
            <div class="menu-block">
                <div class="mobile-sticky-footer">
                    <a target="_blank" class="skype" href="skype:aegissoftware?call"><i class="fa fa-fw" aria-hidden="true" title="Skype"></i></a>
                    <a target="_blank" class="whatsapp" href="https://api.whatsapp.com/send?phone=919824127020&text=Hi&sbquo;&nbsp;I&nbsp;am&nbsp;Connect&nbsp;through&nbsp;your&nbsp;website"><i class="fa fa-fw" aria-hidden="true" title="Whatsapp"></i></a>
                    <a target="_blank" class="inquiry" href="tel:+16469710799"><i class="fa fa-fw" aria-hidden="true" title="Phone"></i></a>
                    <a target="_blank" class="case-studies" href="mailto:info@nexsoftsys.com"><i class="fa fa-fw" aria-hidden="true" title="Email"></i></a>
                    <a href="../rfp.html" class="client-speaks"><i class="fa fa-fw" aria-hidden="true" title="RFP"></i></a>
                </div>	
                <div class="container">
                    <nav class="menu-navigation">
                        <div class="logo-block">
                            <a class="navbar-brand" href="/">
                                <img src="../images/logo.png" alt="logo" />
                            </a>
                        </div>
                        <a class="menuswitch" href="#">
                            <span class="menuline bar1"></span>
                            <span class="menuline bar2"></span>
                            <span class="menuline bar3"></span>
                        </a>
                        <div class="menu-collapse">
                            <ul class="navigation-menu">
                                <li><a href="/">Home</a></li>
                                <li><a href="../company.html">About Us</a></li>
                                <li class="dropdown">
                                    <i class="ddl-switch"></i>
                                    <a href="#">Services</a>
                                    <ul class="dropdown-menu">
                                        <div class="dropdown-menubox">
                                            <li><a href="../services/application-development.html">Application Development</a></li>
                                            <li><a href="#">Digital Transformation</a></li>
                                            <li><a href="../services/software-consulting-services.html">Software Consulting Services</a></li>
                                            <li><a href="../services/software-it-outsourcing-services.html">Software IT Outsourcing</a></li>
                                            <li><a href="../services/offshore-development-center.html">Offshore Development</a></li>
                                        </div>
                                        <div class="dropdown-menubox">
                                            <li><a href="../services/big-data-services.html">Big Data</a></li>
                                            <li><a href="../services/real-time-data-analytics-services.html">Real Time Analytics</a></li>
                                            <li><a href="#">Block Chain</a></li>
                                            <li><a href="../services/devops-consulting.html">DevOps</a></li>
                                            <li><a href="../services/offshore-qa-testing-services.html">QA and Testing Services</a></li>
                                        </div>
                                        <div class="dropdown-menubox">
                                            <li><a href="../services/amazon-cloud-services.html">Amazon Cloud Services</a></li>
                                            <li><a href="../services/cloud-application-development.html">Cloud Application</a></li>
                                            <li><a href="../services/mobility-solutions.html">Enterprise Mobility</a></li>
                                            <li><a href="#">Business Intelligence</a></li>
                                        </div>
                                        <div class="dropdown-menubox">
                                            <li><a href="../services/data-warehousing-solutions.html">Data ware Housing</a></li>
                                            <li><a href="#">Data Integration</a></li>
                                            <li><a href="../services/ETL-data-integration-services.html">ETL</a></li>
                                            <li><a href="#">Dashboards</a></li>
                                        </div>
                                    </ul>
                                </li>
                                <li class="dropdown">
                                    <i class="ddl-switch"></i>
                                    <a href="#">Technologies</a>
                                    <ul class="dropdown-menu two_col">
                                        <div class="dropdown-menubox">
                                            <li><a href="../technologies/java-application-development.html">Java</a></li>
                                            <li><a href="../technologies/python-development-services.html">Python</a></li>
                                            <li><a href="../technologies/scala-development.html">Scala</a></li>
                                            <li><a href="../technologies/magento-ecommerce.html">Magento</a></li>
                                        </div>
                                        <div class="dropdown-menubox">
                                            <li><a href="../technologies/android-app-development.html">Android</a></li>
                                            <li><a href="../technologies/ios-application-development.html">iOS</a></li>
                                            <li><a href="../technologies/pentaho-BI-Services.html">Pentaho BI</a></li>
                                        </div>
                                        <div class="dropdown-menubox microsoft_nested">
                                            <li class="full_width"><strong>Microsoft</strong></li>
                                            <li><a href="../technologies/net-application-development.html">.Net Development</a></li>
                                            <li><a href="../technologies/microsoft-dynamics-365.html">Dynamics 365</a></li>
                                            <li><a href="../technologies/dynamics-365-business-central-solutions-development.html">Dynamics 365 Business Central</a></li>
                                            <li><a href="../technologies/dynamics365-finance-and-operations.html">Dynamics 365 Finance &amp; Operations</a></li>
                                            <li><a href="../technologies/microsoft-dynamics-crm-consulting.html">Dynamics CRM</a></li>
                                            <li><a href="#">Power BI</a></li>
                                        </div>
                                    </ul>
                                </li>
                                <li><a href="/articles/">Blog</a></li>
                                <li><a href="../contact.html" class="menu-box">Contact Us</a></li>
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- Header Section /- -->

    <div class="b-notification-bar">
        <!-- Social Links -->
        <ul class="btnlist">
            <li class="item skype">
                <a href="skype:aegissoftware?call">
                    <div class="sticky-box">
                        <p><i class="fa fa-skype"></i></p>
                        <p>Skype</p>
                    </div>
                </a>
            </li>
        </ul>
        <!-- # Social Links -->

        <!-- Inquiry Form -->
        <ul class="btnlist">
            <li class="item inquiry">
                <div id="inquiry_form" class="btn sticky-box">
                    <p><i class="fa fa-envelope" aria-hidden="true"></i></p>
                    <p>Quick Inquiry</p>
                </div>
                <div class="info-box inq">
                    <img src="images/close-icon.png" class="closeInquiry" alt="close" />
                    <strong class="title">Fill the details and We’ll get back to you soon</strong>
                    <form>
                        <div class="inquiry-box">
                            <div class="form-group fullwidth">
                                <textarea class="form-control" id="txtcomments" placeholder="Tell us your requirements"></textarea>
                            </div>
                            <div class="form-group-block">
                                <div class="form-group">
                                    <input class="form-control" id="txtphone" placeholder="Phone" type="text" onkeydown="javascript:backspacerDOWN(this, event);" onkeyup="javascript:backspacerUP(this, event);">
                                </div>
                                <div class="form-group">
                                    <input class="form-control" id="txtemail" placeholder="Email" type="email">
                                </div>
                                <div class="form-group">
                                    <input class="form-control" id="txtskype" placeholder="Skype" type="text">
                                </div>
                                <div class="form-group">
                                    <img id="imgCaptcha" alt="captcha" src="/Captcha.ashx" />
                                    <input class="form-control" type="text" placeholder="Captcha" id="txtCaptcha" name="txtCaptcha" />
                                </div>
                                <div class="form-group Clear">
                                    <button type="button" id="btnSubmit" value="Submit" name="Submit" class="btn-submit">Submit</button>
                                </div>
                                <div class="form-group Clear">
                                    <span id="lblInfo"> </span>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </li>
        </ul><!-- Inquiry Form /- -->
        <!--Btns-->
        <ul class="btnlist">
            <li class="item case-studies">
                <div class="btn sticky-box" onClick="window.location.href='../casestudy/java/java-case-studies.html'">
                    <p><i class="fa fa-check-square-o" aria-hidden="true"></i></p>
                    <p>Case Studies</p>
                </div>
            </li>
            <li class="item client-speaks">
                <div class="btn sticky-box" onClick="window.location.href='../testimonials/java-testimonials.html'">
                    <p><i class="fa fa-smile-o" aria-hidden="true"></i></p>
                    <p>Client Speaks</p>
                </div>
            </li>
        </ul><!--Btns-->
    </div>

    <div class="Inner-Banner">
        <div class="Page-Size">
            <h1>Overview of Travis CI Pipeline, Google Cloud Kubernetes Cluster and Kubernetes Security with RBAC</h1>
        </div>
    </div>
    <!--Web-Banner-->

    <div class="Page-Size">
        <div class="Text Width-100">
            <div class="single-content-block">
                <div class="single-article-img"><img src="images/travis-ci-pipeline.png" alt="Google Cloud Kubernetes"/></div>
                <h2>Introduction to Travis CI Pipeline</h2>
                <p>In this section, I am going to discuss the travis.yaml file that I am going to put together to build all of our different images and then eventually deploy our application to our Kubernetes Cluster. Please find the below flow diagram to give you an idea of what we are going to be doing inside of our config file to eventually deploy our application.</p>
                <p><strong>Travis Config File Internals:</strong></p>
                <div class="single-article-img"><img src="images/gck1.jpg" alt="Google Cloud Kubernetes"/></div>
                <p>So, here everything is going to start inside of our config file by installing a Google cloud SDK. Remember, the entire purpose of Travis is to not only test our code but then to also deploy our application after our tests runs successfully. So, we need to make sure that Travis has the ability to somehow reach out to our Kubernetes cluster and make changes to it or essentially run a series of configuration files and apply them to our cluster. So, to do so we are going to install a Google Cloud  SDK.  This is a CLI i.e. going to allow us to remotely interact with and configure the Kubernetes Cluster by applying different config files.</p>
                <p>But the SDK does not come kind of preconfigured with Travis. We have to actually download and install the SDK every time we that we run our Travis built. After we download SK, then we have to configure the SDK with some information from our google cloud account. We are going to authorize this this CLI to make changes to our Google Cloud account and more specifically the Kubernetes cluster i.e. already being created.</p>
                <p>I am going to login to docker CLI and then build the test version of multi-client image and then run tests. If all the tests run successfully, I am going to run a script. This is a separate script outside of Travis.yaml file.  All these steps you can find in the above diagram.</p>
                <p><strong>Creation of “.travis.yml” file:</strong></p>
                <ul class="listing">
                    <li>I am going to create a Travis configuration file(.travis.yml) file. First thing, I am going to add is “sudo : required” because we are making use of docker. Then we require the docker services to be pre-installed as soon as we try to run our build. Because we definitely need Travis to build our images and even run that test container.</li>
                    <li>Then we have to add a before_install flag. This is going to be a series of steps. First step is to download google cloud sdk and then the next step is to look up the default install directory of Google cloud SDK which is by default at HOME directory. It is going to source the file path.bash.inc. This means there is some configuration i.e. going to modify our shell inside Travis CI and we are going to apply that additional configuration through the source command.</li>
                    <li>Then the next step is to install the kubectl inside of Travis environment. Eventually, we are going to use this kubectl to apply all those different configs. Files. Then the next step is authentication. In order to tell Gcloud who we are and give access to our account, we have to activate a service account and then provide a set of credentials through “service-account.json” file. The credentials that are going to be placed inside this file are extremely sensitive. We have to encrypt this file and store it in travis</li>
                </ul>
                <p><strong>Example ” .travis.yml” file:</strong></p>
                <div class="single-article-img"><img src="images/gck2.jpg" alt="Google Cloud Kubernetes"/></div>
                <h3>Generating a Service Account in Google Cloud:</h3>
                <p>For creating a service account, go to your google cloud page site in browser and then navigate to “IAM & admin” page and then click on the service accounts  and in that page click on “Create Service account” button.  Please find the example page:</p>
                <div class="single-article-img"><img src="images/gck3.jpg" alt="Google Cloud Kubernetes"/></div>
                <p>Here, I have given the account name as “travis-deployer” but you can give any account name. Then I have assigned a role that the service account is going to have. I have given the role of “Kubernetes Engine Admin”. After that when you click the save button, the JSON file will get downloaded automatically. This file has all account credentials. We need to encrypt this file and upload it to Travis CI.</p>
                <p><strong>Running Travis CLI in a Container:</strong></p>
                <p>We need to download and install the Travis CLI which is a program that I am going to use to encrypt that service account JSON file and tie to Travis CI account. To download Travis CLI, you can go to “github.com/travis-ci/travis.rb”. Travis CLI requires Ruby to be installed on your local system. We have to get a Docker image that has Ruby pre-installed and then we can install Travis CLI here.</p>
                <p><strong>We have to execute below docker commands.</strong></p>
                <ul class="listing">
                    <li>
                        <p>1st command is running the image that has Ruby version 2.3. At the same time, I am going to start up a shell inside there. Also, I have set up a volume. The purpose of the volume is to eventually get the service account JSON file inside the container. Here, I am using $(pwd) and this is valid only if you are running on a UNIX based system. In windows, you have to use ${pwd}.</p>
                    </li>
                    <li>
                        <p>For Linux:</p>
                        <div class="single-article-img"><img src="images/gck4.jpg" alt="Google Cloud Kubernetes"/></div>
                    </li>
                    <li>
                        <p>For Windows:</p>
                        <div class="single-article-img"><img src="images/gck5.jpg" alt="Google Cloud Kubernetes"/></div>
                    </li>
                    <li>
                        <p>After this command execution, you will enter into the shell and then type ls then you will see below folder:</p>
                        <div class="single-article-img"><img src="images/gck6.jpg" alt="Google Cloud Kubernetes"/></div>
                    </li>
                    <li>
                        <p>Here, you are seeing the app folder that we set up as a volume. And then go to app folder with the command “cd app”, then you will see all of the project folders.</p>
                        <div class="single-article-img"><img src="images/gck7.jpg" alt="Google Cloud Kubernetes"/></div>
                    </li>
                    <li>
                        <p>Next step is , I am going to install Travis using gem. Gem is a dependency manager for Ruby. So, I am using gem program to install Travis. “—no-rdoc & “—no-ri” are optional flags. This restricts the documents to get installed along with this gem. This will make the installation faster.</p>
                        <div class="single-article-img"><img src="images/gck8.jpg" alt="Google Cloud Kubernetes"/></div>
                    </li>
                    <li>
                        <p>The next command is “travis login”. Here you have to login to your github account(while signing up to a Travis CI if you have signed up using your github account).  Example image:</p>
                        <div class="single-article-img"><img src="images/gck9.jpg" alt="Google Cloud Kubernetes"/></div>
                    </li>
                    <li>
                        <p>Now, the next step is to copy the JSON file (service account JSON file) into the volume directory(inside our app folder). Now, go you’re your /app folder and hit the below command:</p>
                        <div class="single-article-img"><img src="images/gck10.jpg" alt="Google Cloud Kubernetes"/></div>
                    </li>
                    <li>
                        <p>While execution of this command, it will show the below messages:</p>
                        <div class="single-article-img"><img src="images/gck11.jpg" alt="Google Cloud Kubernetes"/></div>
                    </li>
                    <li>
                        <p>This means we have to add the openssl commands in our .travis.yml file. This command will take the encrypted json file and then use the encrypted version of the file that is stored on the Travis CI servers and unencrypted. I will copy the entire command and will paste in my travis yaml file. </p>
                    </li>
                    <li>
                        <p>Now the encrypted file you can upload to your Git repo. Now, inside of our app directory we will have only the encrypted json file. Make sure you delete the original json file after encryption done.</p>
                    </li>
                    <li>
                        <p>We have to do extra setup in our “.travis.yml” file. We have to tell Gcloud CLI that what project and what zone we want to operate on inside of our Gcloud account.  And also, we have to five our Kubernetes cluster name that we have created in Gcloud.</p>
                    </li>
                    <li>
                        <p>Next, we have to login to the docker CLI. We have access to docker as we have specified docker as a service in our yaml file.  The next part is now to build the image and  will tag it with a temporary tag of “react-test”. I am going to specify docker file to use for this “-f” followed with relative path to the docker file and after that I specified the build context. Build context is the client directory.</p>
                    </li>
                    <li>
                        <p>Now we are done with our before install section. Now I am going to define  “script” section where is going to define how to run the actual tests for our project. In this script section, I am going to run the react-test image. Here I have added “-- --coverage” . It is going to produce a coverage report i.e. going to give Travis a signal that either everything ran successfully, or it crashed for some reason. Now we are done with script section and our tests are running successfully.</p>
                    </li>
                </ul>
                <p>Now Our “.travis.yml” file will look like as below:</p>
                <p><strong>.travis.yml file:</strong></p>
                <div class="single-article-img"><img src="images/gck12.jpg" alt="Google Cloud Kubernetes"/></div>
                <h3>Travis Deployment</h3>
                <p>Now, I will explain about the actual deployment assuming that all the tests successfully ran. To do the deployment, I am going to write a deployment script separate from the travis yaml file.  Please note that Travis does not have a built-in provider for deploying code onto the Kubernetes Cluster. W</p>
                <p>So, now in my .travis.yml file, I am going to write the deploy section and there will mention as below:</p>
<xmp>
deploy:
    provider: script
    script: bash ./deploy.sh
    on:
        branch: master
</xmp>
                <p>So, the above lines say that I am calling a custom script called “deploy.sh” and running the script for deployment. Also, I have set option of master branch. Because I want to do our deployment if we are pushing up the branch Master. So, our final .travis.yml file will look like as below:</p>
                <p><strong>Final .travis.yml file:</strong></p>
                <div class="single-article-img"><img src="images/gck13.jpg" alt="Google Cloud Kubernetes"/></div>
                <p><strong>Creating Deployment Script:</strong></p>
                <p>Now, let’s create a deploy.sh script. I will put a series of commands here i.e. going to build the images, tag them, push them and apply config.</p>
                <p>So, our deploy.sh file will look like as below:</p>
                <div class="single-article-img"><img src="images/gck14.jpg" alt="Google Cloud Kubernetes"/></div>
                <p><strong>Explanation:</strong></p>                
                <ul class="listing">
                    <li>First step is building the images. I have done a docker build for multi-client image , server image and for the worker image as well.</li>
                    <li>Next step is I have to take those images and push them off to the docker hub. We have already logged in to the docker through the travis.yml file. So, I have written docker push command for all the 3 images.</li>
                    <li>Next step is to take all of the different config files inside of k8s directory, I have written kubectl apply commands.</li>
                    <li>As soon as we set an image with the latest tag on our deployment, then It will not update the version as it is already running on the latest, so no change required. And also, we should not update the version manually. So, we need to have something that is done automatically.</li>
                    <li>So, when I set our image on our deployment, I have provided the image name with a version tag. So, I have used the $SHA. This SHA variable is already defined as an environment variable in our travis.yml file. The current SHA is nothing but the “git rev-parse HEAD”. This determines the current commit SHA and assign it to env. Variable.</li>
                </ul>
                <p><strong>client-deployment.yml file:</strong></p>
                <div class="single-article-img"><img src="images/gck15.jpg" alt="Google Cloud Kubernetes"/></div>
                <p><strong>server-deployment.yml</strong></p>
                <div class="single-article-img"><img src="images/gck16.jpg" alt="Google Cloud Kubernetes"/></div>
                <p><strong>worker-deployment.yml:</strong></p>
                <div class="single-article-img"><img src="images/gck17.jpg" alt="Google Cloud Kubernetes"/></div>
                <p>Now, we are ready with everything. We will push all these files onto the master branch  on GitHub.</p>
                <p>Travis CI is then automatically going to pick up our changes and run our travis.yml file and then eventually run the deploy.sh file.  You can verify your deployment in the Google cloud page under the “Workloads”. You can see the deployments would have been created there. Then also you can open up your docker hub and verify our 3 images “multi-client”, multi-server” and “multi-worker”</p>
                <p>Now I will discuss about the Kubernetes Security with RBAC.</p>
                <h3>Kubernetes Security with RBAC</h3>
                <ul class="listing">
                    <li>
                        <p>RBAC stands for Role based access control. The purpose of RBAC is to limit who can access what different  types of resources inside of Kubernetes cluster. Inside of local <a href="https://www.nexsoftsys.com/technologies/java-web-development.html" target="_blank">Java software development</a> environment of Minikube, the RBAC system is not enabled by default. So, in local environment. Any pod could access the cluster directly and arbitrarily change the configuration. In other words, we could create a pod inside of our cluster locally. The local cluster that tried to access the Kubernetes cluster and arbitrarily create new sets of pods or new deployments or new secrets or delete stuffs if it wanted to.</p>
                    </li>
                    <li>
                        <p>Now, you can imagine in production environment. We generally like to kind of lock things down and make sure that unauthorized users or programs do not have the ability to change the configuration of our cluster.</p>
                    </li>
                    <li>
                        <p>So, the RBAC system is all about making sure that we have the ability o limit who can do    what inside of our cluster. Locally with minikube RBAC is not enabled.</p>
                    </li>
                    <li>
                        <p>Google cloud enables RBAC by default. So, in production, we definitely have to deal with this security system. The main thing I want to point out here is the purpose of Tiller Server is modifying the configuration of our cluster. So, it might create things or delete things, but we need to make sure that the Tiller has the correct set of permissions so that it can make all the different changes.</p>
                    </li>
                    <li>
                        <p>The RBAC system has a lot of intricacies to it. In Google cloud, a user account or a service account just identifies you. It is only a “ClusterRoleBinding” that gives us the ability to do something. There is also another “RoleBinding”. Both  allows to have an authorized set of action that you can make inside of your cluster.</p>
                    </li>
                    <li>
                        <p>So, for security, you need to create a service account and a clusterRoleBinding. Then you have to tie this  clusterRoleBinding to that service account. Then you have to assign this service account to the Tiller Pod so that Tiller has the ability to change anything that it wants to across your entire cluster.</p>
                    </li>
                    <li>
                        <p>For Creating a service account, you have to use the below command:</p>
                        <div class="single-article-img"><img src="images/gck18.jpg" alt="Google Cloud Kubernetes"/></div>
                    </li>
                        <p>This will create a new service account called tiller in the kube-system namespace.</p>
                    </li>
                        <p>To create a new clusterRoleBinding with the role “cluster-admin” and to assign it to service account “tiller”, please hit the below command:</p>
                        <div class="single-article-img"><img src="images/gck19.jpg" alt="Google Cloud Kubernetes"/></div>
                    </li>
                        <p>You should run the above commands on your Google cloud shell.</p>
                    </li>
                        <p>These are the additional security setup that you can do in you Kubernetes cluster. You can learn about more in our Kubernetes deployment with Helm setup.</p>
                    </li>
                </ul>
                <h3>Conclusion</h3>
                <p>Here, I have explained the most important features of Travis Deployment configurations including the Kubernetes security features of RBAC. Also, I have demonstrated only the deployment configuration part but the other core part of the application Redis configurations, you have to understand from the script screenshot that I have provided in this article.</p>
                <h3>References</h3>
                <ul class="listing">
                    <li><a href="https://docs.travis-ci.com/user/deployment" target="_blank">https://docs.travis-ci.com/user/deployment</a></li>
                    <li><a href="https://docs.travis-ci.com/user/deployment/gcs/" target="_blank">https://docs.travis-ci.com/user/deployment/gcs/</a></li>
                </ul>
                <h3>Read more</h3>
                <ul class="listing">
                    <li><a href="https://www.nexsoftsys.com/articles/kubernetes-volume-is-used-for-pvc-to-pod-template.html" target="_blank">How Kubernetes volume is used for PVC to Pod Template</a></li>
                </ul>
                <!-- # -->
            </div>
        </div>
        <div class="Clear">&nbsp;</div>
    </div>
    <!--Page-Size-->
    

<div id="nss-note"><img src="../images/nss.jpg" alt="NSS Note" /></div>

    <div class="clients-section margin_top30">
        <div class="section-header ourclients">
            <h4>Some of our clients</h4>
        </div>
        <div class="container">
            <div class="clients-block owl-carousel owl-theme">
                <div class="item client1"><img src="../images/spacer.gif" alt="client" /></div>
                <div class="item client2"><img src="../images/spacer.gif" alt="client" /></div>
                <div class="item client3"><img src="../images/spacer.gif" alt="client" /></div>
                <div class="item client4"><img src="../images/spacer.gif" alt="client" /></div>
                <div class="item client5"><img src="../images/spacer.gif" alt="client" /></div>
                <div class="item client8"><img src="../images/spacer.gif" alt="client" /></div>
                <div class="item client9"><img src="../images/spacer.gif" alt="client" /></div>
                <div class="item client10"><img src="../images/spacer.gif" alt="client" /></div>
                <div class="item client11"><img src="../images/spacer.gif" alt="client" /></div>
                <div class="item client15"><img src="../images/spacer.gif" alt="client" /></div>
                <div class="item client16"><img src="../images/spacer.gif" alt="client" /></div>
                <div class="item client17"><img src="../images/spacer.gif" alt="client" /></div>
                <div class="item client12"><img src="../images/spacer.gif" alt="client" /></div>
                <div class="item client13"><img src="../images/spacer.gif" alt="client" /></div>
                <div class="item client14"><img src="../images/spacer.gif" alt="client" /></div>
                <div class="item client6"><img src="../images/spacer.gif" alt="client" /></div>
                <div class="item client7"><img src="../images/spacer.gif" alt="client" /></div>
            </div>
        </div>
    </div>
    <div class="teams-section">
        <div class="container">
            <div class="teams-title">
                <img data-src="../images/team-title.svg" class="lazyload" alt="team" />
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer-main">
        <div class="container">
            <div class="row">
                <div class="footer-box">
                    <h3>Services</h3>
                    <div class="footer-innerbox-block">
                        <div class="footer-innerbox">
                            <ul class="listing">
                                <li><a href="../services/application-development.html">Application Development</a></li>
                                <li><a href="#">Digital Transformation</a></li>
                                <li><a href="../services/software-consulting-services.html">Software Consulting Services</a></li>
                                <li><a href="../services/software-it-outsourcing-services.html">Software IT Outsourcing</a></li>
                                <li><a href="../services/offshore-development-center.html">Offshore Development</a></li>
                                <li><a href="../services/big-data-services.html">Big Data</a></li>
                                <li><a href="../services/real-time-data-analytics-services.html">Real Time Analytics</a></li>
                                <li><a href="#">Block Chain</a></li>
                                <li><a href="../services/devops-consulting.html">DevOps</a></li>
                            </ul>
                        </div>
                        <div class="footer-innerbox">
                            <ul class="listing">
                                <li><a href="../services/offshore-qa-testing-services.html">QA and Testing Services</a></li>
                                <li><a href="../services/amazon-cloud-services.html">Amazon Cloud Services</a></li>
                                <li><a href="../services/cloud-application-development.html">Cloud Application</a></li>
                                <li><a href="../services/mobility-solutions.html">Enterprise Mobility</a></li>
                                <li><a href="#">Business Intelligence</a></li>
                                <li><a href="../services/data-warehousing-solutions.html">Data ware Housing</a></li>
                                <li><a href="#">Data Integration</a></li>
                                <li><a href="../services/ETL-data-integration-services.html">ETL</a></li>
                                <li><a href="#">Dashboards</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="footer-box">
                    <h3>Technologies</h3>
                    <div class="footer-innerbox w35">
                        <ul class="listing">
                            <li><a href="../technologies/java-application-development.html">Java</a></li>
                            <li><a href="../technologies/python-development-services.html">Python</a></li>
                            <li><a href="../technologies/scala-development.html">Scala</a></li>
                            <li><a href="../technologies/magento-ecommerce.html">Magento</a></li>
                            <li><a href="../technologies/android-app-development.html">Android</a></li>
                            <li><a href="../technologies/ios-application-development.html">iOS</a></li>
                            <li><a href="../technologies/pentaho-BI-Services.html">Pentaho BI</a></li>
                        </ul>
                    </div>
                    <div class="footer-innerbox w65">
                        <ul class="listing">
                            <li class="list-title"><strong>Microsoft</strong></li>
                            <li><a href="../technologies/net-application-development.html">.Net Development</a></li>
                            <li><a href="../technologies/microsoft-dynamics-365.html">Dynamics 365</a></li>
                            <li><a href="../technologies/dynamics-365-business-central-solutions-development.html">Dynamics 365 Business Central</a></li>
                            <li><a href="../technologies/dynamics365-finance-and-operations.html">Dynamics 365 Finance &amp; Operations</a></li>
                            <li><a href="../technologies/microsoft-dynamics-crm-consulting.html">Dynamics CRM</a></li>
                            <li><a href="#">Power BI</a></li>
                        </ul>
                    </div>
                </div>
                <div class="footer-box footer_sm">
                    <div class="footer-box-business">
                        <h3>Business with us</h3>
                        <ul class="listing">
                            <li><a href="../company.html">Company</a></li>
                            <li><a href="../contact.html">Contact Us</a></li>
                            <li><a href="../careers.html">Careers</a></li>
                            <li><a href="/articles/">Blog</a></li>
                            <li><a href="mailto:info@nexsoftsys.com">Mail Us</a></li>
                        </ul>
                        <div class="footer-socialbox">
                            <h3>Follow NEX</h3>
                            <div class="ft-social">
                                <a href="https://www.facebook.com/NexSoftSys/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a>
                                <a href="https://twitter.com/nexsoftsys" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
                                <a href="https://www.linkedin.com/company/nexsoftware/" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
                                <a href="https://www.youtube.com/c/Nexsoftsys" target="_blank"><i class="fa fa-youtube-play" aria-hidden="true"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            <div class="ast"><p>An Aegis Group Company</p><span></span></div>
            </div>
        </div>
        <div class="copyright_text">
            <div class="copyright_text">
                <div class="container footer-rating">
                    <p>Copyright &copy; <span id="year"></span> NEX Software All rights reserved</p>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Footer /- -->
    <script defer src="../js/jquery-1.12.4.min.js"></script>
    <script defer src="../js/lib.js"></script>
    <script defer src="js/functions.js"></script>   
</body>
</html>