<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>How to Configure a Kubernetes Volumes and Designating a PVC Using Pod Template?</title>
    <meta name="description" content="In this article, you’ll learn about the Internals of Kubernetes Volumes and Designating a PVC (Persistent Volume Claim) to Pod Template." />
    <meta name="keywords" content="Kubernetes, PVC (Persistent Volume Claim), Pod Template, Docker" />
    <link rel="canonical" href="https://www.nexsoftsys.com/articles/kubernetes-volume-is-used-for-pvc-to-pod-template.html" />

    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="How to Configure a Kubernetes Volumes and Designating a PVC Using Pod Template?" />
    <meta property="og:description" content="In this article, you’ll learn about the Internals of Kubernetes Volumes and Designating a PVC (Persistent Volume Claim) to Pod Template." />
    <meta property="og:url" content="https://www.nexsoftsys.com/articles/kubernetes-volume-is-used-for-pvc-to-pod-template.html" />
    <meta property="og:site_name" content="NEX Softsys" />
    <meta property="article:publisher" content="https://www.facebook.com/NexSoftSys/" />
    <meta property="article:section" content="Trending" />
    <meta property="og:image" content="https://www.nexsoftsys.com/articles/images/Kubernetes-Volumes.jpg" />
    <meta property="og:image:secure_url" content="https://www.nexsoftsys.com/articles/images/Kubernetes-Volumes.jpg" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:description" content="In this article, you’ll learn about the Internals of Kubernetes Volumes and Designating a PVC (Persistent Volume Claim) to Pod Template." />
    <meta name="twitter:title" content="How to Configure a Kubernetes Volumes and Designating a PVC Using Pod Template?" />
    <meta name="twitter:site" content="@nexsoftsys" />
    <meta name="twitter:image" content="https://www.nexsoftsys.com/articles/images/Kubernetes-Volumes.jpg" />
    <meta name="twitter:creator" content="@nexsoftsys" />

    <link type="image/x-icon" href="../images/favicon.ico" rel="shortcut icon" />
    <link rel="apple-touch-icon" sizes="57x57" href="../images/apple-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="../images/apple-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="../images/apple-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="../images/apple-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="../images/apple-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="../images/apple-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="../images/apple-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="../images/apple-icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="../images/apple-icon-180x180.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="../images/android-icon-192x192.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="../images/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="96x96" href="../images/favicon-96x96.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="../images/favicon-16x16.png" />
    <link rel="manifest" href="../images/manifest.json" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="msapplication-TileImage" content="images/ms-icon-144x144.png" />
    <meta name="theme-color" content="#ffffff" />
	
<!-- Google Analytics -->
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-64517863-1', 'auto');
	ga('send', 'pageview');
</script><!-- Google Analytics /- -->

<!-- Library -->
<link rel="stylesheet" type="text/css" href="../css/lib.css">

<!-- Custom - Common CSS -->
<link rel="stylesheet" type="text/css" href="../css/style.css">
<link rel="stylesheet" type="text/css" href="../css/navigation.css">
<link rel="stylesheet" type="text/css" href="../style.css"/>

<noscript>
<div class="ndiv">
<div class="ntext">
<b>JavaScript Required</b>
<p>We're sorry, but we doesn't work properly without JavaScript enabled.</p>
</div>
</div>
</noscript>
</head>
<body>
    <!-- Header Section -->
    <div id="return-to-top"><i class="fa fa-angle-up"></i></div>

    <header class="header_s">
        <!-- ===== Popup Box ===== -->
        <section class="top-box">
            <div class="container">
                <div class="row">
                    <div class="col-12 same-line">
                        <div class="contain-box">
                            <p>Looking for an Expert Development Team? Take two weeks Trial! <a href="javascript:;" id="myBtn">Try Now</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="modal" id="myModal">
            <div class="modal-content">
                <div class="modal-header">
                    <span class="close">&times;</span>
                    <strong>Free 2 Week Trial</strong>
                </div>
                <div class="modal-form">
                    <form>
                        <div class="form-group">
                            <label>Your Name *</label>
                            <input type="text" name="question-title" class="form-control" id="txt2Name" placeholder="Your Name" />
                        </div>
                        <div class="form-group">
                            <label>Your Email *</label>
                            <input type="text" name="question-title" class="form-control" id="txt2Email" placeholder="Your Email" />
                        </div>
                        <div class="form-group">
                            <label>Your Mobile *</label>
                            <input type="text" name="question-title" class="form-control" id="txt2Phone" placeholder="Your Mobile" />
                        </div>
                        <div class="form-group">
                            <label>Subject</label>
                            <input type="text" name="question-title" class="form-control" id="txt2Subject" placeholder="Subject" />
                            <input type="hidden" id="txt2Page" value="" />
                        </div>
                        <div class="form-group">
                            <label>Your Message</label>
                            <textarea class="form-control" cols="5" rows="5" placeholder="Your Message" id="txt2Message" name="message"></textarea>
                        </div>
                        <div class="form-group">
                            

<img id="imgCaptchaRFP" alt="captcha" src="" class="captcha-style" />
                            <input class="form-control captcha-txt" type="text" placeholder="Captcha" id="txt2Captcha" name="txtCaptcha" />
                        </div>
                    </form>
                </div>
                <div class="modal-footer text-center">
                    <button type="button" id="btn2WeekSubmit" value="Send" name="Submit">Send</button>
                    <p><span id="lbl2WeekInfo" class="lblblack"></span></p>
                </div>
            </div>
        </section>
        <!-- # -->
        <div class="container-fluid">
            <div class="menu-block">
                <div class="mobile-sticky-footer">
                    <a target="_blank" class="skype" href="skype:aegissoftware?call"><i class="fa fa-fw" aria-hidden="true" title="Skype"></i></a>
                    <a target="_blank" class="whatsapp" href="https://api.whatsapp.com/send?phone=919824127020&text=Hi&sbquo;&nbsp;I&nbsp;am&nbsp;Connect&nbsp;through&nbsp;your&nbsp;website"><i class="fa fa-fw" aria-hidden="true" title="Whatsapp"></i></a>
                    <a target="_blank" class="inquiry" href="tel:+16469710799"><i class="fa fa-fw" aria-hidden="true" title="Phone"></i></a>
                    <a target="_blank" class="case-studies" href="mailto:info@nexsoftsys.com"><i class="fa fa-fw" aria-hidden="true" title="Email"></i></a>
                    <a href="../rfp.html" class="client-speaks"><i class="fa fa-fw" aria-hidden="true" title="RFP"></i></a>
                </div>	
                <div class="container">
                    <nav class="menu-navigation">
                        <div class="logo-block">
                            <a class="navbar-brand" href="/">
                                <img src="../images/logo.png" alt="logo" />
                            </a>
                        </div>
                        <a class="menuswitch" href="#">
                            <span class="menuline bar1"></span>
                            <span class="menuline bar2"></span>
                            <span class="menuline bar3"></span>
                        </a>
                        <div class="menu-collapse">
                            <ul class="navigation-menu">
                                <li><a href="/">Home</a></li>
                                <li><a href="../company.html">About Us</a></li>
                                <li class="dropdown">
                                    <i class="ddl-switch"></i>
                                    <a href="#">Services</a>
                                    <ul class="dropdown-menu">
                                        <div class="dropdown-menubox">
                                            <li><a href="../services/application-development.html">Application Development</a></li>
                                            <li><a href="#">Digital Transformation</a></li>
                                            <li><a href="../services/software-consulting-services.html">Software Consulting Services</a></li>
                                            <li><a href="../services/software-it-outsourcing-services.html">Software IT Outsourcing</a></li>
                                            <li><a href="../services/offshore-development-center.html">Offshore Development</a></li>
                                        </div>
                                        <div class="dropdown-menubox">
                                            <li><a href="../services/big-data-services.html">Big Data</a></li>
                                            <li><a href="../services/real-time-data-analytics-services.html">Real Time Analytics</a></li>
                                            <li><a href="#">Block Chain</a></li>
                                            <li><a href="../services/devops-consulting.html">DevOps</a></li>
                                            <li><a href="../services/offshore-qa-testing-services.html">QA and Testing Services</a></li>
                                        </div>
                                        <div class="dropdown-menubox">
                                            <li><a href="../services/amazon-cloud-services.html">Amazon Cloud Services</a></li>
                                            <li><a href="../services/cloud-application-development.html">Cloud Application</a></li>
                                            <li><a href="../services/mobility-solutions.html">Enterprise Mobility</a></li>
                                            <li><a href="#">Business Intelligence</a></li>
                                        </div>
                                        <div class="dropdown-menubox">
                                            <li><a href="../services/data-warehousing-solutions.html">Data ware Housing</a></li>
                                            <li><a href="#">Data Integration</a></li>
                                            <li><a href="../services/ETL-data-integration-services.html">ETL</a></li>
                                            <li><a href="#">Dashboards</a></li>
                                        </div>
                                    </ul>
                                </li>
                                <li class="dropdown">
                                    <i class="ddl-switch"></i>
                                    <a href="#">Technologies</a>
                                    <ul class="dropdown-menu two_col">
                                        <div class="dropdown-menubox">
                                            <li><a href="../technologies/java-application-development.html">Java</a></li>
                                            <li><a href="../technologies/python-development-services.html">Python</a></li>
                                            <li><a href="../technologies/scala-development.html">Scala</a></li>
                                            <li><a href="../technologies/magento-ecommerce.html">Magento</a></li>
                                        </div>
                                        <div class="dropdown-menubox">
                                            <li><a href="../technologies/android-app-development.html">Android</a></li>
                                            <li><a href="../technologies/ios-application-development.html">iOS</a></li>
                                            <li><a href="../technologies/pentaho-BI-Services.html">Pentaho BI</a></li>
                                        </div>
                                        <div class="dropdown-menubox microsoft_nested">
                                            <li class="full_width"><strong>Microsoft</strong></li>
                                            <li><a href="../technologies/net-application-development.html">.Net Development</a></li>
                                            <li><a href="../technologies/microsoft-dynamics-365.html">Dynamics 365</a></li>
                                            <li><a href="../technologies/dynamics-365-business-central-solutions-development.html">Dynamics 365 Business Central</a></li>
                                            <li><a href="../technologies/dynamics365-finance-and-operations.html">Dynamics 365 Finance &amp; Operations</a></li>
                                            <li><a href="../technologies/microsoft-dynamics-crm-consulting.html">Dynamics CRM</a></li>
                                            <li><a href="#">Power BI</a></li>
                                        </div>
                                    </ul>
                                </li>
                                <li><a href="/articles/">Blog</a></li>
                                <li><a href="../contact.html" class="menu-box">Contact Us</a></li>
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </header><!-- Header Section /- -->

    <div class="b-notification-bar">
            <!-- Social Links -->
            <ul class="btnlist">
                <li class="item skype">
                    <a href="skype:aegissoftware?call">
                        <div class="sticky-box">
                            <p><i class="fa fa-skype"></i></p>
                            <p>Skype</p>
                        </div>
                    </a>
                </li>
            </ul>
            <!-- # Social Links -->

            <!-- Inquiry Form -->
            <ul class="btnlist">
                <li class="item inquiry">
                    <div id="inquiry_form" class="btn sticky-box">
                        <p><i class="fa fa-envelope" aria-hidden="true"></i></p>
                        <p>Quick Inquiry</p>
                    </div>
                    <div class="info-box inq">
                        <img src="images/close-icon.png" class="closeInquiry" alt="close" />
                        <strong class="title">Fill the details and We’ll get back to you soon</strong>
                        <form>
                            <div class="inquiry-box">
                                <div class="form-group fullwidth">
                                    <textarea class="form-control" id="txtcomments" placeholder="Tell us your requirements"></textarea>
                                </div>
                                <div class="form-group-block">
                                    <div class="form-group">
                                        <input class="form-control" id="txtphone" placeholder="Phone" type="text" onkeydown="javascript:backspacerDOWN(this, event);" onkeyup="javascript:backspacerUP(this, event);">
                                    </div>
                                    <div class="form-group">
                                        <input class="form-control" id="txtemail" placeholder="Email" type="email">
                                    </div>
                                    <div class="form-group">
                                        <input class="form-control" id="txtskype" placeholder="Skype" type="text">
                                    </div>
                                    <div class="form-group">
                                        <img id="imgCaptcha" alt="captcha" src="/Captcha.ashx" />
                                        <input class="form-control" type="text" placeholder="Captcha" id="txtCaptcha" name="txtCaptcha" />
                                    </div>
                                    <div class="form-group Clear">
                                        <button type="button" id="btnSubmit" value="Submit" name="Submit" class="btn-submit">Submit</button>
                                    </div>
                                    <div class="form-group Clear">
                                        <span id="lblInfo"> </span>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </li>
            </ul><!-- Inquiry Form /- -->
            <!--Btns-->
            <ul class="btnlist">
                <li class="item case-studies">
                    <div class="btn sticky-box" onClick="window.location.href='../casestudy/java/java-case-studies.html'">
                        <p><i class="fa fa-check-square-o" aria-hidden="true"></i></p>
                        <p>Case Studies</p>
                    </div>
                </li>
                <li class="item client-speaks">
                    <div class="btn sticky-box" onClick="window.location.href='../testimonials/java-testimonials.html'">
                        <p><i class="fa fa-smile-o" aria-hidden="true"></i></p>
                        <p>Client Speaks</p>
                    </div>
                </li>
            </ul><!--Btns-->
        </div>
    <div class="Inner-Banner">
        <div class="Page-Size">
            <h1>How Kubernetes volume is used for PVC to Pod Template</h1>
        </div>
    </div>
    </div>
    <!--Web-Banner-->
    <div class="Page-Size">
        <div class="Text Width-100 margh2">
            <h2>Introduction</h2>
            <div class="single-article-img">
                <img src="images/Kubernetes-Volumes.jpg" alt="Kubernetes Volumes and Designating a PVC"/>
            </div>
            <h3>Why we need Volume in Kubernetes</h3>
            <p>Here, to give you a good idea of what a Persistent volume claim (PVC) is, I want to explain to you first what a volume is and why we need a volume at all with Postgres in particular.</p>
            <div class="single-article-img"><img src="images/Kubernetes-Volumes-and-Designating-a-PVC.jpg" alt="Kubernetes Volumes and Designating a PVC" /></div>
            <ul class="listing">
                <li>
                    <p> Now, look at the above image. We have the deployment which creates a Pod and inside that pod, we have a single Postgres container and inside that container is a file system i.e. totally isolated to just be accessible by the container itself. As you know Postgres is a database and this db is very similar to many other types of dbs. Postgres takes in some amount of data and writes it to a file system. So, we can imagine that a request to write some data or save some data with Postgres comes into the container. PostgreSQL is going to process it and eventually stores the information into a file system. So, inside that container, we can imagine that there is a file system and some amount of data is being stored on it.</p>
                </li>
                <li>
                    <p> Here is the thing to keep in mind about any file system that is created or maintained inside of a container. If we ever had a situation where for any reason you can imagine the Postgres container with a Pod wrapping it and managing it crashes, then everything over there gets 100 percent lost including the file system that exists inside of the Postgres container.</p>
                </li>
                <li>
                    <p> So, if we just use our copy of Postgres as a single deployment with the Pods inside of it and no associated volumes and if just write data to Postgres and then if that container eventually crashes then that entire pod is going to be deleted by the deployment. And a new pod is going to be created in its place and this new pod is going to have no carryover of data or no previous data. So, none of the data on the file system of the Original container gets brought over to the new container or the Pod that wraps it. So, at the instant that the deployment starts up a new pod, then we lose all of the data that are present inside of the postgres database.</p>
                </li>
                <li>
                    <p> We never want to experience any type of data loss with any database such as Postgres. This is the issue now what I discussed. If just let Postgres save all of its data inside the file system maintained by the container, we are going to lose it as soon as the Pod crashes. Please see the below image to understand more:</p>
                    <div class="single-article-img"><img src="images/Kubernetes-Volumes-and-Designating-a-PVC1.jpg" alt="Kubernetes Volumes and Designating a PVC" /></div>
                </li>
                <li>
                    <p> So, now I will explain how we can solve this problem of data loss when the Pod crashes. The solution to this problem is “Volume”.</p>
                </li>
                <li>
                    <p> We can make use of volumes to have a consistent file system that can be accessed by the database Postgres and now we can imagine that with a volume in place i.e. running on a host machine, if we have to write data that comes into the container, then Postgres will think that it is going to writing it to a file system that exists inside the container but in reality, it is going to be a “volume” that actually exists outside on the host machine.</p>
                </li>
                <li>
                    <p> We can make use of volumes to have a consistent file system that can be accessed by the database Postgres and now we can imagine that with a volume in place i.e. running on a host machine, if we have to write data that comes into the container, then Postgres will think that it is going to writing it to a file system that exists inside the container but in reality, it is going to be a “volume” that actually exists outside on the host machine.</p>
                </li>
                <li>
                    <p>The result of this is that if our original pod or the Postgres Container inside of it crashes for any reason, the deployment is going to delete that thing and will create a new pod with a new copy of Postgres inside of it. But we are going to make sure the new copy of Postgres that gets created gets access to the exact same volume and so it will have access to all of the data that had been written by the previous copy of Postgres that already existed. Please refer the below diagram for clear understanding:</p>
                    <div class="single-article-img"><img src="images/Kubernetes-Volumes-and-Designating-a-PVC2.jpg" alt="Kubernetes Volumes and Designating a PVC" /></div>
                </li>
                <li>That is why we use volumes, and this is how we are going to allow ourselves to save data with the database but will not have to worry about all the data inside there being deleted anytime that the container has to be restarted or crashes. Suppose in your deployment yaml configuration file, if you would have set “replicas: 2”, then we would end up with a situation where we will have two pods that will be accessing the same volume.</li>
                <li>Having two different databases access the same file system without them being aware of each will be a disaster and will create problems. So, at no point in time, you are ever going to increment the replicas to two or more. So, here you are not able to scale up. For any reason, if you want to scale up your copy of Postgres and make it more available, then you have to go through some additional configuration steps besides just incrementing the number of the replicas.</li>
            </ul>
            <h3>Kubernetes Volumes Internals</h3>
            <p>I will explain how we can use volume in the way of persisting data outside of a container so that the data will be persisted across restarts or termination of a given container. Now, I will elaborate on volumes in the world of Kubernetes.</p>
            <p>“Volume” in Kubernetes is a reference to a very particular type of object. A Deployment is an object, or a <a href="https://www.nexsoftsys.com/technologies/java-web-development.html" target="_blank">Java Software Development service</a> is an object. So, in the world of Kubernetes, we can write a configuration file that will create something called a “volume”. In Kubernetes, that object is something that allows a container to store some persistent data at the Pod level. In addition to the use of volumes, we also have access to two other types of data storage mechanisms that are “Persistent Volume” and “Persistent Volume claim”.</p>
            <p><strong>Note:</strong> Volume is very different than a persistent volume and persistent volume claim.</p>
            <ul class="listing">
                <li>
                    <p> Let’s consider Postgres Deployment as in the below image. So, we have a deployment that manages a single pod and that pod has a single Postgres container. See the below image:</p>
                    <div class="single-article-img"><img src="images/Kubernetes-Volumes-and-Designating-a-PVC3.jpg" alt="Kubernetes Volumes and Designating a PVC" /></div>
                </li>
                <li>When we create a volume in Kubernetes, we are creating a kind of data storage pocket that exists or is tied directly to a very specific pod. You notice in the above diagram I am reflecting the volume that is going to store some amount of data as being kind of like inside the pod.</li>
                <li>It essentially belongs to or is associated with the pod. Now, this Volume can be accessed by any container inside the pod. For example, if we have a Postgres container running, it can then store all of its data inside of the volume that belongs to the pod itself. Now the benefit using this volume is that if the Postgres container dies or crashes or gets restarted as a new container then the new Postgres container has access to all that data inside that same volume and it has access to all the data that the previous container had access to.</li>
            </ul>
            <h3>Limitations of Volumes in Kubernetes</h3>
            <P>But one problem here. The volume is tied to the pod. So, if the pod itself ever dies then the volume dies and goes away as well. So, a volume in Kubernetes will survive container restarts inside of a pod. So, now you got to know that in the world of Kubernetes, a volume is not really appropriate for storing data for a database. It definitely can work in the sense that the container can restart but we are still kind of vulnerable to anything goes wrong at the pod level itself.</P>
            <h3>Volume  vs Persistent Volume(PV)</h3>
            <p>The other types of objects present in Kubernetes are Persistent Volume claim and persistent volume. I have created a diagram to specify the differences between the PVC and PV.</p>
            <div class="single-article-img"><img src="images/Kubernetes-Volumes-and-Designating-a-PVC4.jpg" alt="Kubernetes Volumes and Designating a PVC" /></div>
            <ul class="listing">
                <li>So, in the above diagram, on the left-hand side, we have a Postgres deployment with a volume that already I have explained. Now notice the right-hand side image above, with a persistent volume (PV), we are creating some type of long durable storage that is not tied to any specific Pod or any specific container. So, you can imagine that a PV is outside the pod and completely separate from the pod. If the container crashes for any reason or if it needs to be created or recreated for any reason, then the old container will get died and the new one can connect to that PV that exists outside of that Pod.</li>
                <li>Now let’s consider the other case where the Pod gets deleted or recreated or get crashed due to any reason, then the old Pod completely disappears but the PV will stick around and when the new Pod gets created with a new copy of Postgres then that container is going to be able to connect to that PV that exists outside of that Pod. So, this is a big and noticeable difference between a normal volume and a persistent volume.</li>
                <li>So, here I am talking about the life cycle of the volume itself. With a normal volume, it is tied to the life cycle of the Pod but with a PV, it is going to last for all the time or else until we as administrator manually delete. With a PV, we can recreate a container or Pod with no issues. The volume will still be going to stick around with all the data that we expect to have.</li>
            </ul>
            <p>Read more - <a href="https://www.nexsoftsys.com/articles/importance-of-kubernetes-in-devops.html" target="_blank">The Importance of Kubernetes in DevOps</a></p>
            <h3>Persistent Volume(PV) vs Persistent Volume Claim(PVC)</h3>
            <ul class="listing">
                <li>So, here I am going to give you a very quick analogy to help you understand the differences between a PV and PVC. So, let’s imagine that we are putting together a pod configuration. So, when we put a Pod, we know that it is going to need a persistent volume. And think of a system that is going to advertise a couple of different storage options. So different storage options that are being advertised are what we refer to PVC. So, PVC is an advertisement and it is not an actual volume. It cannot store anything. It is just an advertisement that says here are the different options that we will have access to for storage inside of a particular cluster.</li>
                <li>So, we are going to write out inside of some config files the different persistent volume claims that are going to be available inside of our cluster. Now, we have to write a config file that says that there should be a 500 GB hard drive option available to all the different parts inside of our cluster. Also, we have to write out a config file that says there is a 1TB option i.e. available as well. Theoretically, a PVC is like an advertisement that there is something you can avail of for our pod when it is created.</li>
                <li>Now, when you chose one of those persistent volumes, then you went to the Kubernetes with your pod config and you said to Kubernetes (which is the salesperson in reality) to avail that 500GB option. So, here Kubernetes has to go back into some imaginary store and has to look through some number of options of PVs that are readily available.</li>
                <li>So, inside of a Kubernetes cluster, we might have some number of PVs that have already been created. These are instances of hard drives actually that can be used right away for storage. Any PV i.e. created ahead of time inside our cluster is referred to as statically provision. A statically Provisioned persistent volume is something that we have specifically created ahead of time.</li>
                <li>We have another option also available that PV can be created on the fly. So, this PV is called dynamically Provisioned persistent volume. It is another storage option that is not created ahead of time, but it is only created when we put into our pod and ask for it.</li>
            </ul>
            <p><strong>Summary PVC:</strong> So, finally to summarize what a PVC is: PVC is an advertisement of options and we can ask for one of those options inside of our Pod config and handle it to Kubernetes. So, Kubernetes will at its existing stores of Persistent volume, and it will give us the volume that has already been created or it will create a new one on the fly dynamically.</p>
            <h3>PVC Demo</h3>
            <p><strong>Persistent Volume Claim Configuration File Overview:</strong></p>
            <p>I am going to write out a PVC config file. This is going to advertise possible storage options that can be attached to a Pod config. So, I am going to create a YAML file here named “database-persistent-volume-claim-yaml” file.</p>
            <p><strong>database-persistent-volume-claim-yaml file:</strong></p>
            <div class="single-article-img"><img src="images/Kubernetes-Volumes-and-Designating-a-PVC5.jpg" alt="Kubernetes Volumes and Designating a PVC" /></div>
            <p><strong>Explanation:</strong></p>
            <ul class="listing">
                <li>So, in the above file, I have put together the PVC configurations. A volume claim is not an actual instance of storage. We are going to attach this to our Pod config file and then pass it to Kubernetes. So, please notice the “spec” section in the above file. The configuration underneath the “spec” section says that if we attach this claim to a pod, then Kubernetes must find an instance of storage.</li>
                <li><strong>“AccessModes”:</strong> We have 3 different types of access modes. Here I have used “ReadWriteOnce”. This means that we want to get some instances of storage like a slice of your hard disk that can be used by a single node at a time. And to be more precise, a single node can use it, and both read and write information to that volume. We have also the accessMode as “ReadOnlyMany” which means that multiple nodes at the same time can read information from persistent volume.</li>
                <li>And then “ReadWriteMany” means that we can both read and write information to the persistent volume by many nodes at the same time. I want to highlight the fact that the “accessModes” that we have specified in our config file clearly says that if we attach it to a Pod config file and then hands it off to the Kubernetes then Kubernetes is going to have to find an instance of storage that supports this access mode (in our case it is “ReadWriteOnce” access mode).</li>
                <li><strong>Resources:</strong> Under this resource, we are specifying the storage. With the “storage “ option, we are saying that Kubernetes is going to find a storage option either one that has provisioned ahead of time or one that is going to be created on the fly that has at least 2 GB of space or it has to have exact 2BG of space. We can change the “storage” number to any memory we need. For 2GB, we have to mention “2Gi” here.</li>
                <li>There are also other possible options that we can put inside of our PVC file. I did not put these options because I am going to rely on the defaults for each of these. Let’s imagine what happens behind the scene when we hand the PVC off to the Kubernetes. Kubernetes has to find the pre-configured pre-created ahead of time persistent volume or make one on the fly.</li>
                <li>Now I will explain to you what is going on behind the scene. Actually, Kubernetes is going to make a slice of your personal computer’s hard drive, the machine on which Kubernetes has been installed. So, you can imagine hat on your hard drive, Kubernetes occupies 1GB little piece of your hard drive and this is going to be a Persistent Volume. And this PV gets handed back over to your Pod. So, on your computer, you ask Kubernetes for some amount of storage i.e. just one place for Kubernetes to allocate that storage.</li>
                <li>
                    <p>You can actually see in the Kubernetes config where it decides to make this the default where it decides it is going to put it on your hard drive. Now to do so, we can go the terminal and will execute the below command:</p>
                    <div class="single-article-img"><img src="images/Kubernetes-Volumes-and-Designating-a-PVC6.jpg" alt="Kubernetes Volumes and Designating a PVC" /></div>
                </li>
                <li>So, when we run get storageclass, then we can see all the different options on our computer that the Kubernetes has for creating a persistent volume. Right now, you can see the above image that shows a single option called “standard”. This is the default option. So, if we did not specify a storage class with our PVC, then the standard option will be used by default.</li>
                <li>How Kubernetes is going to decide how to provision or create this PV is by using the “minikube-hostpath” option. If we want to see more options then you can execute command</li>
            </ul>
            <div class="text-center">
                <p><strong>“kubectl describe storageclass”</strong></p>
            </div>
            <p>So, when you execute the above command it gives the below output:</p>
            <div class="single-article-img"><img src="images/Kubernetes-Volumes-and-Designating-a-PVC7.jpg" alt="Kubernetes Volumes and Designating a PVC" /></div>
            <ul class="listing">
                <li>The output tells us in a very broad  term. We have a provisioner here i.e. “minikube-hostpath”. This means that when we ask Kubernetes to create this PV, then it is going to look on the host machine to minikube and it is going to make a little slice of our hard drive space. Things get more complicated when we move our cluster from our computer to a cloud environment.</li>
                <li>
                    <p>  So, when we are working with a cloud provider, we get many numbers of different options where some hard drive space or file system space can be sourced from. In a cloud or Production environment, if we create PVC config for 1GB of space, then Kubernetes will have many options available because every cloud provider like Azure or Google cloud provides different solutions for storing information. We have to tell Kubernetes which of the below options we want to use:</p>
                    <div class="single-article-img"><img src="images/Kubernetes-Volumes-and-Designating-a-PVC8.jpg" alt="Kubernetes Volumes and Designating a PVC" /></div>
                </li>
                <li>So, if we are hosting our application on Google cloud, the google cloud service called “ Persistent Disk” is going to be used to store information with our persistent volume. If our app is on Microsoft Azure, then we can use Azure file or Azure Disk to store information with our PV. For AWS, we have AWS block store. So, like these many options available in a cloud env.</li>
                <li>But in our case, we are setting up the PVC in our local environment only without designating a storage class name.  We did not specify that option because we are relying upon the Kubernetes’s default. So, this storageClassName option is available where we can customize Kubernetes is going to look to create the file system to allocate to our Pod.</li>
            </ul>
            <h3>Designating a PVC in a Pod Template</h3>
            <p>Now, I am going to create our Postgres deployment file as below:</p>
            <p><strong>postgres-deployment-yaml:</strong></p>
            <div class="single-article-img"><img src="images/Kubernetes-Volumes-and-Designating-a-PVC9.jpg" alt="Kubernetes Volumes and Designating a PVC" /></div>
            <p> Please look at the “template” section of the above fie. This template is used for every pod i.e. created by this deployment. As “replicas” value I have set to 1, so there will always be one pod at a time. Now I am going to update the template section and will inform this pod that when it is created, it needs to request some type of long-term storage this is nothing but a persistent volume that meets all the requirements that are advertised by PVC configured in our database-persistent-volume-claim.yaml file.</p>
            <p> Now, inside the “spec” section of our postgres-deployment-yaml file, I am going to add a new key-value pair. I will put “volumes” of name “postgres-storage” and in the persistentVolumeClaim section, I will give the name of our PVC file.</p>
            <p>Now our updated postgres-deployment-yaml file will look like as below:</p>
            <p><strong>Updated “postgres-deployment-yaml” file with Volumes configured:</strong></p>
            <div class="single-article-img"><img src="images/Kubernetes-Volumes-and-Designating-a-PVC10.jpg" alt="Kubernetes Volumes and Designating a PVC" /></div>
            <p><strong>Explanation:</strong></p>
            <ul class="listing">
                <li>So, the volumes that we configured in our above configuration file sets up the request on the Pod to reach out to Kubernetes and asks for storage (that has ReadWriteOnce access mode and 2GB memory) that meets all the requirements that are laid out inside of our “database-persistent-volume-claim” object.</li>
                <li>The volumes in the yaml config file are just to allocate the storage either in the local computer or if it is a production environment then storage will be allocated by the cloud provider. So, once we allocate that storage, then we need to actually assign it for use by all the different containers that are in use by our Pod. So, in addition to the “Volumes” section, I have also added some config to our container section as well.</li>
                <li>Now please look at the “Containers” section in the above image. I have added “volumeMounts” which clarifies that after accessing the storage, now how to use that storage inside of the container. Notice that volume name and volume mount name are identical i.e. “postgres-storage” in our file. So, when we put the same name in the volumeMount, that means the particular storage that we have asked Kubernetes for in “volumes” entry section of our file, this piece of storage is going to be used for this particular volumeMount and hence the names are identical.</li>
                <li>Then the next part is “mountPath”. This “mountPath” is designating where inside the container this storage should be made available. So, I have given the folder reference there and anything that the container stores at this folder inside the provided directory will be actually stored inside of our volume. This is very similar to the docker volume. So, in the mount path, I have designated the data directory that postgres uses for storing data on the hard drive. This is the actual data that we want to back up.</li>
                <li>The nonpayment storage area for postgres is “/var/lib/postgresql/data”.  This path I have given in the mountPath field. Another part is “subPath”. “subPath” choice means that any data inside the container that is collected center of the mount path is going to be stored inside of a folder called “postgres” inside of the actual Persistent volume claim. So, if we ran our application for few minutes and save some data to our Postgres database and then eventually open up our persistent volume, then we would see that all the data that were saved to “/var/lib/postgresql/data” folder is nested inside of a folder called “postgres” inside Persistent volume.</li>
            </ul>
            <p><strong>Note:</strong> I have given example here very specific to “PostgreSQL” database.</p>
            <p><strong>Applying a PVC:</strong></p>
            <ul class="listing">
                <li>
                    Now, I am going to apply our configuration to a local cluster. So, I have put my two configuration files (postgres-deployment-yaml and database-persistent-volume-claim ) in a directory called k8s and now I am  going to execute the below command:
                    <div class="single-article-img"><img src="images/Kubernetes-Volumes-and-Designating-a-PVC11.jpg" alt="Kubernetes Volumes and Designating a PVC" /></div>
                </li>
                <li>
                    Here k8s is my directory name where I have placed all the required config files and directly executed the apply command on the folder only. The below output I will be getting:
                    <div class="single-article-img"><img src="images/Kubernetes-Volumes-and-Designating-a-PVC12.jpg" alt="Kubernetes Volumes and Designating a PVC" /></div>
                </li>
                <li>Please see the above output, it says that database-persistent-volume-claim is created, and our postgres-deployment is configured. Now, let’s see the status of our deployment and all of its pods. For getting the pod status, please execute command “kubectl get pods”.</li>
                <li>
                    Now, I am going to list out the different persistent volumes that have been created inside of our application. So, I am going to execute the below command:
                    <div class="single-article-img"><img src="images/Kubernetes-Volumes-and-Designating-a-PVC13.jpg" alt="Kubernetes Volumes and Designating a PVC" /></div>
                </li>
                <li>
                    Here “pv” stands for persistent volume.  Now output we will get is as below:
                    <div class="single-article-img"><img src="images/Kubernetes-Volumes-and-Designating-a-PVC14.jpg" alt="Kubernetes Volumes and Designating a PVC" /></div>
                </li>
                <li>
                    On the right-hand side of the on a high result, you can understand the “CLAIM” i.e. using our “database-persistent-volume” claim that we have configured and status of that is bound which means that currently, it is in use.  Now, to list out all the PVC, I am going to execute the below command:
                    <div class="single-article-img"><img src="images/Kubernetes-Volumes-and-Designating-a-PVC15.jpg" alt="Kubernetes Volumes and Designating a PVC" /></div>
                </li>
                <li>
                    This command will list out all the different claims that we have created.  The output we will get as below:
                    <div class="single-article-img"><img src="images/Kubernetes-Volumes-and-Designating-a-PVC16.jpg" alt="Kubernetes Volumes and Designating a PVC" /></div>
                </li>
                <li>Remember the claim name on the above output image is just an advertisement. In simple words, it is just saying that if we want, we can get. So, the persistent volume is an actual instance of storage that meets all the requirements that are laid out by the Persistent volume claim that we made.</li>
                <li>If you want to delete the persistent volume claim or persistent volume, then you can clean up these volumes using the below command:</li>
            </ul>
            <div class="text-center">
                <p><strong>“kubectl delete pvc database-persistent-volume-claim”</strong></p>
                <p><strong>“kubectl delete pv your Persistent Volume Name”</strong></p>
            </div>
            <p><strong>Summary:</strong> So, here if we write any data to Postgress db and then for some reason kill that pod then ideally it will not wipe out any other data that had been stored inside the database. So, you can test this yourself by saving any data to Postgres.</p>
            <h3>Conclusion:</h3>
            <p>Here in this article, you learned the internals of Kubernetes persistent volume claim and persistent volume. Also, this blog explained to you about the need for volumes in Kubernetes and demo on how to create and designate the PVC configuration files in Pod template through an example of Postgres deployment.</p>
            <h3>Reference:</h3>
            <ul class="listing">
                <li><a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/" target="_blank">https://kubernetes.io/docs/concepts/storage/persistent-volumes/</a></li>
                <li><a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-persistent-volume-storage/" target="_blank">https://kubernetes.io/docs/tasks/configure-pod-container/configure-persistent-volume-storage/ </a></li>
            </ul>
            <!-- # -->
        </div>
    <div class="Clear">&nbsp;</div>


</div>

<div id="nss-note"><img src="../images/nss.jpg" alt="NSS Note" /></div>
<div class="clients-section margin_top30">
    <div class="section-header ourclients">
        <h4>Some of our clients</h4>
    </div>
    <div class="container">
        <div class="clients-block owl-carousel owl-theme">
            <div class="item client1"><img src="../images/spacer.gif" alt="client" /></div>
            <div class="item client2"><img src="../images/spacer.gif" alt="client" /></div>
            <div class="item client3"><img src="../images/spacer.gif" alt="client" /></div>
            <div class="item client4"><img src="../images/spacer.gif" alt="client" /></div>
            <div class="item client5"><img src="../images/spacer.gif" alt="client" /></div>
            <div class="item client8"><img src="../images/spacer.gif" alt="client" /></div>
            <div class="item client9"><img src="../images/spacer.gif" alt="client" /></div>
            <div class="item client10"><img src="../images/spacer.gif" alt="client" /></div>
            <div class="item client11"><img src="../images/spacer.gif" alt="client" /></div>
            <div class="item client15"><img src="../images/spacer.gif" alt="client" /></div>
            <div class="item client16"><img src="../images/spacer.gif" alt="client" /></div>
            <div class="item client17"><img src="../images/spacer.gif" alt="client" /></div>
            <div class="item client12"><img src="../images/spacer.gif" alt="client" /></div>
            <div class="item client13"><img src="../images/spacer.gif" alt="client" /></div>
            <div class="item client14"><img src="../images/spacer.gif" alt="client" /></div>
            <div class="item client6"><img src="../images/spacer.gif" alt="client" /></div>
            <div class="item client7"><img src="../images/spacer.gif" alt="client" /></div>
        </div>
    </div>
</div>
<div class="teams-section">
    <div class="container">
        <div class="teams-title">
            <img data-src="../images/team-title.svg" class="lazyload" alt="team" />
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="footer-main">
    <div class="container">
        <div class="row">
            <div class="footer-box">
                <h3>Services</h3>
                <div class="footer-innerbox-block">
                    <div class="footer-innerbox">
                        <ul class="listing">
                            <li><a href="../services/application-development.html">Application Development</a></li>
                            <li><a href="#">Digital Transformation</a></li>
                            <li><a href="../services/software-consulting-services.html">Software Consulting Services</a></li>
                            <li><a href="../services/software-it-outsourcing-services.html">Software IT Outsourcing</a></li>
                            <li><a href="../services/offshore-development-center.html">Offshore Development</a></li>
                            <li><a href="../services/big-data-services.html">Big Data</a></li>
                            <li><a href="../services/real-time-data-analytics-services.html">Real Time Analytics</a></li>
                            <li><a href="#">Block Chain</a></li>
                            <li><a href="../services/devops-consulting.html">DevOps</a></li>
                        </ul>
                    </div>
                    <div class="footer-innerbox">
                        <ul class="listing">
                            <li><a href="../services/offshore-qa-testing-services.html">QA and Testing Services</a></li>
                            <li><a href="../services/amazon-cloud-services.html">Amazon Cloud Services</a></li>
                            <li><a href="../services/cloud-application-development.html">Cloud Application</a></li>
                            <li><a href="../services/mobility-solutions.html">Enterprise Mobility</a></li>
                            <li><a href="#">Business Intelligence</a></li>
                            <li><a href="../services/data-warehousing-solutions.html">Data ware Housing</a></li>
                            <li><a href="#">Data Integration</a></li>
                            <li><a href="../services/ETL-data-integration-services.html">ETL</a></li>
                            <li><a href="#">Dashboards</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-box">
                <h3>Technologies</h3>
                <div class="footer-innerbox w35">
                    <ul class="listing">
                        <li><a href="../technologies/java-application-development.html">Java</a></li>
                        <li><a href="../technologies/python-development-services.html">Python</a></li>
                        <li><a href="../technologies/scala-development.html">Scala</a></li>
                        <li><a href="../technologies/magento-ecommerce.html">Magento</a></li>
                        <li><a href="../technologies/android-app-development.html">Android</a></li>
                        <li><a href="../technologies/ios-application-development.html">iOS</a></li>
                        <li><a href="../technologies/pentaho-BI-Services.html">Pentaho BI</a></li>
                    </ul>
                </div>
                <div class="footer-innerbox w65">
                    <ul class="listing">
                        <li class="list-title"><h3>Microsoft</h3></li>
                        <li><a href="../technologies/net-application-development.html">.Net Development</a></li>
                        <li><a href="../technologies/microsoft-dynamics-365.html">Dynamics 365</a></li>
                        <li><a href="../technologies/dynamics-365-business-central-solutions-development.html">Dynamics 365 Business Central</a></li>
                        <li><a href="../technologies/dynamics365-finance-and-operations.html">Dynamics 365 Finance &amp; Operations</a></li>
                        <li><a href="../technologies/microsoft-dynamics-crm-consulting.html">Dynamics CRM</a></li>
                        <li><a href="#">Power BI</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-box footer_sm">
                <div class="footer-box-business">
                    <h3>Business with us</h3>
                        <ul class="listing">
                            <li><a href="../company.html">Company</a></li>
                            <li><a href="../contact.html">Contact Us</a></li>
                            <li><a href="../careers.html">Careers</a></li>
                            <li><a href="/articles/">Blog</a></li>
                            <li><a href="mailto:info@nexsoftsys.com">Mail Us</a></li>
                        </ul>
                    <div class="footer-socialbox">
                        <h3>Follow NEX</h3>
                        <div class="ft-social">
                            <a href="https://www.facebook.com/NexSoftSys/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a>
                            <a href="https://twitter.com/nexsoftsys" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
                            <a href="https://www.linkedin.com/company/nexsoftware/" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
                                <a href="https://www.youtube.com/c/Nexsoftsys" target="_blank"><i class="fa fa-youtube-play" aria-hidden="true"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        <div class="ast"><p>An Aegis Group Company</p><span></span></div>
            </div>
        </div>
        <div class="copyright_text">
            <div class="copyright_text">
                <div class="container footer-rating">
                    <p>Copyright &copy; <span id="year"></span> NEX Software All rights reserved</p>
                </div>
            </div>
        </div>
</footer><!-- Footer /- -->

<script defer src="../js/jquery-1.12.4.min.js"></script>
<script defer src="../js/lib.js"></script>
<script defer src="js/functions.js"></script>



</body>
</html>